/*! Built with http://stenciljs.com */
const{h:e}=window.StencilStateTunnel;class t{constructor(){this.addReceiverToList=(e=>{e.preventDefault(),this.errorText=null,""!==this.input.value?(console.log(this.listOfReceivers),-1===this.listOfReceivers.indexOf(this.input.value)?(this.addReceiver(this.input.value),this.input.value=""):this.errorText="Receiver already in the list."):this.errorText="Receiver name cannot be empty."})}render(){return e("form",{onSubmit:this.addReceiverToList},null!=this.errorText?e("p",{class:"error"},this.errorText):null,e("label",null,"Receiver Name:",e("input",{ref:e=>this.input=e,type:"text"})),e("input",{type:"submit",value:"Add Receiver"}))}static get is(){return"demo-add-receiver"}static get properties(){return{addReceiver:{type:"Any",attr:"add-receiver"},errorText:{state:!0},listOfReceivers:{type:"Any",attr:"list-of-receivers"}}}static get style(){return".error{color:red}"}}var s=function(t,s=function(t,s){return e("context-consumer",{subscribe:t,renderer:s})}){let r=new Map,i={listOfReceivers:[],messageLog:[],sendMessage:()=>{},addReceiver:()=>{},removeReceiver:()=>{}};function n(e,t){Array.isArray(e)?[...e].forEach(e=>{t[e]=i[e]}):t[e]=Object.assign({},i),t.forceUpdate()}function o(e){return t=>{r.has(t)||(r.set(t,e),n(e,t))}}function a(e,t){return o(t)(e),function(){r.delete(e)}}return{Provider:function({state:e,children:t}){return i=e,r.forEach(n),t},Consumer:function({children:e}){return s(a,e[0])},wrapConsumer:function(t,s){const r=t.is;return t=>{var{children:i}=t,n=function(e,t){var s={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(s[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(s[r[i]]=e[r[i]])}return s}(t,["children"]);return e(r,Object.assign({ref:o(s)},n),i)}},injectProps:function(e,t){let s=null;const r=Object.keys(e.properties).find(t=>1==e.properties[t].elementRef);if(void 0==r)throw new Error(`Please ensure that your Component ${e.is} has an attribtue with "@Element" decorator. `+"This is required to be able to inject properties.");const i=e.prototype.componentWillLoad;e.prototype.componentWillLoad=function(){if(s=a(this[r],t),i)return i.bind(this)()};const n=e.prototype.componentDidUnload;e.prototype.componentDidUnload=function(){if(s(),n)return n.bind(this)()}}}}(0,(t,s)=>e("context-consumer",{subscribe:t,renderer:s}));class r{constructor(){this.listOfReceivers=[],this.messageLog=[],this.sendMessage=(e=>{this.messageLog=[...this.messageLog,{id:(1e17*Math.random()).toString().match(/.{4}/g).join("-"),timeStamp:new Date,message:e,recipients:this.listOfReceivers}]}),this.addReceiver=(e=>{this.listOfReceivers=[...this.listOfReceivers,e]}),this.removeReceiver=(e=>{this.listOfReceivers=this.listOfReceivers.filter(t=>t!==e)})}render(){const t={listOfReceivers:this.listOfReceivers,messageLog:this.messageLog,sendMessage:this.sendMessage,addReceiver:this.addReceiver,removeReceiver:this.removeReceiver};return e(s.Provider,{state:t},e("header",null,e("h1",null,"Message Demo App")),e("demo-manage-receivers",null),e("demo-send-message",{hasReceivers:this.listOfReceivers.length>0,sendMessage:this.sendMessage}),e("demo-message-log",null))}static get is(){return"demo-app"}static get properties(){return{listOfReceivers:{state:!0},messageLog:{state:!0}}}static get style(){return"demo-app{display:block;width:700px;margin:0 auto}"}}class i{render(){return e("div",null,e("demo-add-receiver",{addReceiver:this.addReceiver,listOfReceivers:this.listOfReceivers}),0===this.listOfReceivers.length?e("p",null,"No Receivers"):e("ul",{class:"receiver-list"},this.listOfReceivers.map(t=>e("li",{key:t},e("button",{class:"add-receiver",onClick:()=>this.removeReceiver(t)},"Ã—"),t))))}static get is(){return"demo-manage-receivers"}static get properties(){return{addReceiver:{type:"Any",attr:"add-receiver"},el:{elementRef:!0},listOfReceivers:{type:"Any",attr:"list-of-receivers"},removeReceiver:{type:"Any",attr:"remove-receiver"}}}static get style(){return"ul.receiver-list{list-style:none;padding-left:10px}ul.receiver-list li{padding:5px 0}button.add-receiver{margin-right:5px}"}}s.injectProps(i,["listOfReceivers","addReceiver","removeReceiver"]);class n{render(){return e(s.Consumer,null,({messageLog:t})=>e("div",null,0===t.length?e("p",null,"No messages sent:"):e("ul",{class:"msg-list"},t.sort((e,t)=>t.timeStamp.getTime()-e.timeStamp.getTime()).map(t=>e("li",{key:t.id},e("span",{class:"row-desc"},"To:")," ",t.recipients.join(", "),e("br",null),e("span",{class:"row-desc"},"Time:")," ",function(e){const t=e.getHours(),s=e.getMinutes(),r=e.getSeconds();return`${[0===t?"12":t>12?t-12:t,s<10?`0${s}`:s,r<10?`0${r}`:r].join(":")} ${t>12?"pm":"am"}`}(t.timeStamp),e("br",null),e("span",{class:"row-desc"},"Text:")," ",t.message,e("br",null))))))}static get is(){return"demo-message-log"}static get style(){return"ul.msg-list{list-style:none;padding-left:10px}ul.msg-list li{padding:10px 0}.row-desc{display:inline-block;font-weight:700;width:45px}"}}class o{constructor(){this.sendToMessageQueue=(e=>{e.preventDefault(),this.errorText=null,this.hasReceivers?""!==this.input.value?(this.sendMessage(this.input.value),this.input.value=""):this.errorText="Message cannot be empty":this.errorText="A message must have at least on receiver."})}render(){return e("form",{onSubmit:this.sendToMessageQueue},null!=this.errorText?e("p",{class:"error"},this.errorText):null,e("label",null,"Message Text:",e("input",{ref:e=>this.input=e,type:"text"})),e("input",{type:"submit",value:"Send message"}))}static get is(){return"demo-send-message"}static get properties(){return{errorText:{state:!0},hasReceivers:{type:Boolean,attr:"has-receivers"},sendMessage:{type:"Any",attr:"send-message"}}}static get style(){return".error{color:red}"}}export{t as DemoAddReceiver,r as DemoApp,i as DemoManageReceivers,n as DemoMessageLog,o as DemoSendMessage};